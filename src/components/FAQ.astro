---
import type { Translations } from '../i18n';

interface Props { t: Translations; }
const { t } = Astro.props;
---

<section class="py-20 lg:py-32 bg-bg-primary">
  <div class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="text-center mb-12 reveal">
      <span class="inline-block text-brand-yellow text-sm font-semibold uppercase tracking-wider mb-4">{t.faq.label}</span>
      <h2 class="text-3xl sm:text-4xl font-bold text-text-primary">{t.faq.title}</h2>
    </div>

    <div class="space-y-3 reveal" id="faq-container">
      {t.faq.items.map((faq) => (
        <div class="faq-item bg-bg-tertiary border border-border-primary rounded-xl overflow-hidden hover:border-border-secondary transition-colors duration-300">
          <button class="faq-trigger w-full flex items-center justify-between p-5 text-left cursor-pointer" aria-expanded="false">
            <span class="text-text-primary font-medium pr-4">{faq.q}</span>
            <span class="faq-icon flex-shrink-0 w-6 h-6 text-brand-blue transition-transform duration-300 flex items-center justify-center text-xl font-light">+</span>
          </button>
          <div class="faq-content">
            <p class="px-5 pb-5 text-text-muted text-sm leading-relaxed">{faq.a}</p>
          </div>
        </div>
      ))}
    </div>
  </div>
</section>

<script>
  document.querySelectorAll('.faq-trigger').forEach(button => {
    button.addEventListener('click', () => {
      const item = button.parentElement!;
      const isActive = item.classList.contains('active');
      document.querySelectorAll('.faq-item').forEach(el => el.classList.remove('active'));
      if (!isActive) {
        item.classList.add('active');
        button.setAttribute('aria-expanded', 'true');
      } else {
        button.setAttribute('aria-expanded', 'false');
      }
    });
  });
</script>
